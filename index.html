<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CareerWise Demo</title>
  <style>
    body { font-family: sans-serif; margin: 2rem; background: #f9fafb; color: #111; }
    h1 { color: #2563eb; }
    .card { background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 1rem; }
    button { background: #2563eb; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; }
    button:hover { background: #1e40af; }
  </style>
</head>
<body>
  <h1>CareerWise — Demo</h1>
  <p>Psychometric + Career Matching (using live API)</p>

  <div class="card">
    <h2>Psychometric Analysis</h2>
    <button onclick="loadQuestions()">Load Questions</button>
    <div id="questions"></div>
    <input id="skills" placeholder="Skills (comma separated)" value="sql, excel" />
    <input id="interests" placeholder="Interests" value="data, analytics" />
    <button onclick="runAnalysis()">Run Analysis</button>
    <pre id="analysis"></pre>
  </div>

  <div class="card">
    <h2>Career Match</h2>
    <button onclick="getMatches()">Get Matches</button>
    <pre id="matches"></pre>
  </div>

  <script>
    const API = "https://careerwise-api.onrender.com";

    async function loadQuestions() {
      const res = await fetch(API + "/api/psychometrics/questions");
      const data = await res.json();
      document.getElementById("questions").innerHTML =
        data.questions.map(q => \`<p>\${q.text} (1–5 scale, default 3)</p>\`).join("");
    }

    async function runAnalysis() {
      const body = {
        answers: [{id: "q1", value: 4}, {id: "q2", value: 3}],
        skills: document.getElementById("skills").value.split(",").map(s => s.trim()),
        interests: document.getElementById("interests").value.split(",").map(s => s.trim())
      };
      const res = await fetch(API + "/api/psychometrics/analyze", {
        method: "POST", headers: {"Content-Type": "application/json"}, body: JSON.stringify(body)
      });
      document.getElementById("analysis").textContent = JSON.stringify(await res.json(), null, 2);
    }

    async function getMatches() {
      const body = {
        traits: [{name: "Analytical Thinking", score: 72}],
        skills: ["sql","excel"], interests: ["data"], topK: 3
      };
      const res = await fetch(API + "/api/matching/careers", {
        method: "POST", headers: {"Content-Type": "application/json"}, body: JSON.stringify(body)
      });
      document.getElementById("matches").textContent = JSON.stringify(await res.json(), null, 2);
    }
  </script>
</body>
</html>
